version: "3"

tasks:
  goose:install:
    desc: "–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç goose –≤ ./bin"
    cmds:
      - |
        [ -f {{.GOOSE}} ] || {
          echo 'üì¶ Installing goose...'
          GOBIN={{.BIN_DIR}} go install github.com/pressly/goose/v3/cmd/goose@{{.GOOSE_VERSION}}
        }
    status:
      - test -x {{.GOOSE}}

  create:
    desc: "–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏"
    dir: iam/migrations
    cmd: "{{.BIN_DIR}}/goose create create_uuid_ossp_extension sql"
    # cmd: "{{.BIN_DIR}}/goose create create_users_table sql"
